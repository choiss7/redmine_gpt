<!-- plugins/redmine_gpt/app/views/gpt/index.html.erb -->
<h1>GPT-4 Prompt</h1>

<%= form_with url: generate_gpt_path, method: :post do |form| %>
  <div>
    <%= label_tag :prompt, "Enter your prompt:" %>
    <%= text_area_tag :prompt %>
  </div>
  <div>
    <%= submit_tag "Generate" %>
  </div>
<% end %>

<% if @response_text %>
  <h2>Result</h2>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Response</th>
      </tr>
    </thead>
    <tbody>
      <% @response_text.split("\n").each_with_index do |response, index| %>
        <tr>
          <td><%= index + 1 %></td>
          <td><%= response %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
